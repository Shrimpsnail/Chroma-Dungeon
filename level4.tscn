[gd_scene load_steps=57 format=3 uid="uid://dom17qsf53y6h"]

[ext_resource type="Script" path="res://cursor.gd" id="1_sax3v"]
[ext_resource type="Material" uid="uid://cy3omxiw1fkx7" path="res://crt.tres" id="2_vhg5k"]
[ext_resource type="Script" path="res://crt.gd" id="3_ii714"]
[ext_resource type="Texture2D" uid="uid://cppa1lkkvjabm" path="res://textures/chromatic_tiles.png" id="5_2wgmv"]
[ext_resource type="Texture2D" uid="uid://t47rnjd1qii6" path="res://textures/dungeon_tiles.png" id="6_5xj6i"]
[ext_resource type="Texture2D" uid="uid://dqoa60bjujksj" path="res://textures/safe.png" id="7_jq8na"]
[ext_resource type="Texture2D" uid="uid://brngiyb2gq7yf" path="res://textures/safe_disabled.png" id="8_y7pcb"]
[ext_resource type="TileSet" uid="uid://b0e0wvrphjnxj" path="res://TS_chromatic.tres" id="10_1pc86"]
[ext_resource type="SpriteFrames" uid="uid://bpu0pwou0m1a8" path="res://SF_Switch.tres" id="10_r3sti"]
[ext_resource type="TileSet" uid="uid://bljju7nm7cl1c" path="res://TS_chromatic_blue.tres" id="10_u137j"]
[ext_resource type="Texture2D" uid="uid://dpacujmojed56" path="res://textures/switch_off.png" id="11_bg5ky"]
[ext_resource type="Texture2D" uid="uid://c5odhn7ew4ugu" path="res://textures/chromatic_tiles2.png" id="12_ukfxe"]
[ext_resource type="Texture2D" uid="uid://b861qyrpr4md6" path="res://textures/switch_on.png" id="12_xoupx"]
[ext_resource type="PackedScene" uid="uid://bodd8yfelcu1b" path="res://player.tscn" id="14_fp8mk"]
[ext_resource type="Script" path="res://Camera_shake.gd" id="15_hip5m"]
[ext_resource type="Script" path="res://crate.gd" id="17_cj3di"]
[ext_resource type="Texture2D" uid="uid://chh4u3t1yxtm" path="res://textures/crate.png" id="18_u4w5w"]
[ext_resource type="AudioStream" uid="uid://djoqym5topte" path="res://sounds/SLOWER-TEMPO2019-12-09_-_Retro_Forest_-_David_Fesliyan.mp3" id="19_qftx2"]
[ext_resource type="Script" path="res://controls.gd" id="19_s4xhg"]
[ext_resource type="Texture2D" uid="uid://dt3jvteb7og23" path="res://textures/controls.png" id="20_edqrv"]
[ext_resource type="Script" path="res://softlock.gd" id="20_xtwef"]
[ext_resource type="Texture2D" uid="uid://s42m23xks17d" path="res://textures/softlocked.png" id="21_q77o1"]

[sub_resource type="Environment" id="Environment_0wu17"]
background_mode = 3
glow_enabled = true
glow_intensity = 0.2
glow_blend_mode = 0
glow_hdr_threshold = 0.0
glow_hdr_scale = 1.95
glow_hdr_luminance_cap = 22.24

[sub_resource type="GDScript" id="GDScript_yhb2v"]
script/source = "extends Node2D

var offsetsy = [0,-16*3,16*3]
var offsetsx = [-16*3,0,16*3]

var goffsetsx = [16*5,0,-16*5]
var goffsetsy = [0,16,-16]

var posoffsetsy = [0,-16*3,0]
var posoffsetsx = [0,0,16*3]

var posgoffsetsx = [0,0,16*5]
var posgoffsetsy = [0,-16,0]


var counter = 0

@export var red: Node
@export var green: Node
@export var blue: Node

@export var red_player: Node
@export var green_player: Node
@export var blue_player: Node

@export var red_crate: Node
@export var green_crate: Node
@export var blue_crate: Node

@export var music: Node

var rnjesus = RandomNumberGenerator.new()


func _ready():
	
	$Audio.set_stream(load(\"res://sounds/kick.wav\"))
	$Audio.playing=true


func _input(event):
	if event.is_action_pressed(\"ui_cancel\"):
		get_tree().quit()
		
	if event.is_action_pressed(\"smash\"):
		
		get_node(\"../Camera2D\").trauma = 0.5
		
		var sound = rnjesus.randi_range(1,3)
		if sound == 1:
			$Audio.set_stream(load(\"res://sounds/smash1.wav\"))
		
		elif sound == 2:
			$Audio.set_stream(load(\"res://sounds/smash2.wav\"))
		else :
			$Audio.set_stream(load(\"res://sounds/smash3.wav\"))
		$Audio.playing=true
		
		
		
		if counter == offsetsx.size()-1:
			counter = 0
				
			red.position = Vector2(0,0)
			blue.position = Vector2(0,0)
			green.position = Vector2(0,0)
			
			
			
		else:
			counter += 1
			
			
			red.position += Vector2(offsetsx[counter],offsetsy[counter])
			blue.position += Vector2(offsetsx[counter],offsetsy[counter])
			green.position += Vector2(goffsetsx[counter],goffsetsy[counter])
			
			
		var collision = red_player.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == red:
				red_player.position += Vector2(offsetsx[counter],offsetsy[counter])
				
		collision = red_crate.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == red  :
				red_crate.position += Vector2(offsetsx[counter],offsetsy[counter])
			
			
		collision = blue_player.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == blue:
				blue_player.position += Vector2(offsetsx[counter],offsetsy[counter])
				
		
		collision = blue_crate.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == blue:
				blue_crate.position += Vector2(offsetsx[counter],offsetsy[counter])
				
		
		collision = green_player.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == green:
				green_player.position += Vector2(goffsetsx[counter],goffsetsy[counter])
		
		
		collision = green_crate.move_and_collide(Vector2(0, 0.1))
		if collision:
			if collision.get_collider() == green:
				green_crate.position += Vector2(goffsetsx[counter],goffsetsy[counter])
		
		
			
					
					
	if event.is_action_pressed(\"reset\"):
		
		Globals.musicProgress  = music.get_playback_position() 
		get_tree().reload_current_scene()
		
	if event.is_action_pressed(\"save\"):
		$Audio.set_stream(load(\"res://sounds/menu_start.wav\"))
		$Audio.playing=true
		Globals.hasSaved  = true
		
		Globals.redPos = red_player.position 
		Globals.greenPos = green_player.position 
		Globals.bluePos = blue_player.position 
		
		Globals.redCPos = red_crate.position 
		Globals.greenCPos = green_crate.position 
		Globals.blueCPos = blue_crate.position
		
		Globals.counter = counter
	
	if event.is_action_pressed(\"load\"):
		if Globals.hasSaved:
			$Audio.set_stream(load(\"res://sounds/menu_change.wav\"))
			$Audio.playing=true
			
			red_player.position = Globals.redPos
			green_player.position = Globals.greenPos 
			blue_player.position = Globals.bluePos 
			
			red_crate.position = Globals.redCPos
			green_crate.position = Globals.greenCPos 
			blue_crate.position = Globals.blueCPos 
			
			counter = Globals.counter
			if counter == 0:
				red.position = Vector2(0,0)
				blue.position = Vector2(0,0)
				green.position = Vector2(0,0)
			else:
				red.position = Vector2(posoffsetsx[counter],posoffsetsy[counter])
				blue.position = Vector2(posoffsetsx[counter],posoffsetsy[counter])
				green.position = Vector2(-posgoffsetsx[counter],-posgoffsetsy[counter])
"

[sub_resource type="GDScript" id="GDScript_hxjmm"]
script/source = "extends Node2D


@export var switch1: Node
var switch1_player = false
var switch1_crate = false

@export var disabled_tiles: Node

@export var rswitch2: Node
@export var gswitch2: Node
@export var bswitch2: Node
var switch2_player = false
var switch2_crate = false

@export var door: Node


func _on_switch_body_entered(body):
	if(body.is_in_group(\"Player\")):
		switch1.get_node(\"AnimatedSprite2D\").play(\"on\")
		disabled_tiles.position.x = 0
		switch1_player=true
		
		if not switch1_crate:
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		
	
	if(body.is_in_group(\"Pushable\")):
		switch1.get_node(\"AnimatedSprite2D\").play(\"on\")
		disabled_tiles.position.x = 0
		switch1_crate=true
		
		if not switch1_player:
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true


func _on_switch_body_exited(body):
	if body.is_in_group(\"Player\"):
		if not switch1_crate:
			switch1.get_node(\"AnimatedSprite2D\").play(\"default\")
			disabled_tiles.position.x = 1008
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		switch1_player = false
	
		
		
	if(body.is_in_group(\"Pushable\")):
		if not switch1_player:
			switch1.get_node(\"AnimatedSprite2D\").play(\"default\")
			disabled_tiles.position.x = 1008
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		switch1_crate = false


func switch2_body_entered(body):
	if(body.is_in_group(\"Player\")):
		rswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		gswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		bswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		door.position.x = 1200
		switch2_player=true
		
		if not switch1_crate:
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		
	
	if(body.is_in_group(\"Pushable\")):
		rswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		gswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		bswitch2.get_node(\"AnimatedSprite2D\").play(\"on\")
		door.position.x = 1200
		switch2_crate=true
		
		if not switch1_player:
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true


func switch2_body_exited(body):
	if body.is_in_group(\"Player\"):
		if not switch2_crate:
			rswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			gswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			bswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			door.position.x = 0
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		switch2_player = false
	
		
		
	if(body.is_in_group(\"Pushable\")):
		if not switch2_player:
			rswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			gswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			bswitch2.get_node(\"AnimatedSprite2D\").play(\"default\")
			door.position.x = 0
			$Audio.set_stream(load(\"res://sounds/switch.wav\"))
			$Audio.playing=true
		switch2_crate = false






func _on_red_switch_1_body_entered(body):
	switch2_body_entered(body)


func _on_green_switch_1_body_entered(body):
	switch2_body_entered(body)


func _on_blue_switch_1_body_entered(body):
	switch2_body_entered(body)


func _on_red_switch_1_body_exited(body):
	switch2_body_exited(body)


func _on_green_switch_1_body_exited(body):
	switch2_body_exited(body)


func _on_blue_switch_1_body_exited(body):
	switch2_body_exited(body)
"

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_g2wek"]
texture = ExtResource("5_2wgmv")
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
3:2/0 = 0
3:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:2/0/physics_layer_0/angular_velocity = 0.0
3:1/0 = 0
3:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:1/0/physics_layer_0/angular_velocity = 0.0
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
4:0/0 = 0
4:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:0/0/physics_layer_0/angular_velocity = 0.0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)
4:1/0 = 0
4:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:1/0/physics_layer_0/angular_velocity = 0.0
4:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)
4:2/0 = 0
4:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:2/0/physics_layer_0/angular_velocity = 0.0
4:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_0ga6k"]
texture = ExtResource("6_5xj6i")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:0/0 = 0
4:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:0/0/physics_layer_0/angular_velocity = 0.0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:0/0 = 0
5:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:0/0/physics_layer_0/angular_velocity = 0.0
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:0/0 = 0
7:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:0/0/physics_layer_0/angular_velocity = 0.0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0 = 0
0:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:1/0/physics_layer_0/angular_velocity = 0.0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0 = 0
3:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:1/0/physics_layer_0/angular_velocity = 0.0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:1/0 = 0
4:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:1/0/physics_layer_0/angular_velocity = 0.0
4:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:1/0 = 0
5:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:1/0/physics_layer_0/angular_velocity = 0.0
5:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:1/0 = 0
6:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:1/0/physics_layer_0/angular_velocity = 0.0
6:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:1/0 = 0
7:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:1/0/physics_layer_0/angular_velocity = 0.0
7:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0 = 0
0:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:2/0/physics_layer_0/angular_velocity = 0.0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:2/0 = 0
3:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:2/0/physics_layer_0/angular_velocity = 0.0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:2/0 = 0
6:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:2/0/physics_layer_0/angular_velocity = 0.0
6:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:2/0 = 0
7:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:2/0/physics_layer_0/angular_velocity = 0.0
7:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:3/0 = 0
0:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:3/0/physics_layer_0/angular_velocity = 0.0
1:3/0 = 0
1:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:3/0/physics_layer_0/angular_velocity = 0.0
2:3/0 = 0
2:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:3/0/physics_layer_0/angular_velocity = 0.0
3:3/0 = 0
3:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:3/0/physics_layer_0/angular_velocity = 0.0
4:3/0 = 0
4:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:3/0/physics_layer_0/angular_velocity = 0.0
5:3/0 = 0
5:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:3/0/physics_layer_0/angular_velocity = 0.0
0:4/0 = 0
0:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:4/0/physics_layer_0/angular_velocity = 0.0
1:4/0 = 0
1:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:4/0/physics_layer_0/angular_velocity = 0.0
3:4/0 = 0
3:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:4/0/physics_layer_0/angular_velocity = 0.0
4:4/0 = 0
4:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:4/0/physics_layer_0/angular_velocity = 0.0
5:4/0 = 0
5:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:4/0/physics_layer_0/angular_velocity = 0.0
0:5/0 = 0
0:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:5/0/physics_layer_0/angular_velocity = 0.0
1:5/0 = 0
1:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:5/0/physics_layer_0/angular_velocity = 0.0
2:5/0 = 0
2:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:5/0/physics_layer_0/angular_velocity = 0.0
3:5/0 = 0
3:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:5/0/physics_layer_0/angular_velocity = 0.0
5:5/0 = 0
5:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:5/0/physics_layer_0/angular_velocity = 0.0
5:6/0 = 0
5:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:6/0/physics_layer_0/angular_velocity = 0.0
5:7/0 = 0
5:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:7/0/physics_layer_0/angular_velocity = 0.0
6:7/0 = 0
6:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:7/0/physics_layer_0/angular_velocity = 0.0
7:7/0 = 0
7:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:7/0/physics_layer_0/angular_velocity = 0.0
7:6/0 = 0
7:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:6/0/physics_layer_0/angular_velocity = 0.0
7:5/0 = 0
7:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:5/0/physics_layer_0/angular_velocity = 0.0
6:5/0 = 0
6:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:5/0/physics_layer_0/angular_velocity = 0.0
6:3/0 = 0
6:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:3/0/physics_layer_0/angular_velocity = 0.0
6:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:3/0 = 0
7:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:3/0/physics_layer_0/angular_velocity = 0.0
7:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:4/0 = 0
6:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:4/0/physics_layer_0/angular_velocity = 0.0
6:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:4/0 = 0
7:4/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:4/0/physics_layer_0/angular_velocity = 0.0
7:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:2/0 = 0
4:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:2/0/physics_layer_0/angular_velocity = 0.0
4:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:2/0 = 0
5:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:2/0/physics_layer_0/angular_velocity = 0.0
5:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:5/0 = 0
4:5/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:5/0/physics_layer_0/angular_velocity = 0.0
4:5/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:7/0 = 0
0:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:7/0/physics_layer_0/angular_velocity = 0.0
0:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)
1:7/0 = 0
1:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:7/0/physics_layer_0/angular_velocity = 0.0
1:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)
2:7/0 = 0
2:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:7/0/physics_layer_0/angular_velocity = 0.0
2:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -8, 4, -8, 4, 8, -4, 8)
2:6/0 = 0
2:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:6/0/physics_layer_0/angular_velocity = 0.0
1:6/0 = 0
1:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:6/0/physics_layer_0/angular_velocity = 0.0
0:6/0 = 0
0:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:6/0/physics_layer_0/angular_velocity = 0.0
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:6/0 = 0
4:6/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:6/0/physics_layer_0/angular_velocity = 0.0
4:6/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:7/0 = 0
4:7/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:7/0/physics_layer_0/angular_velocity = 0.0
4:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_e5n3i"]
texture = ExtResource("7_jq8na")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_d3755"]
texture = ExtResource("8_y7pcb")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0

[sub_resource type="TileSet" id="TileSet_muorx"]
physics_layer_0/collision_layer = 7
physics_layer_0/collision_mask = 7
sources/3 = SubResource("TileSetAtlasSource_e5n3i")
sources/5 = SubResource("TileSetAtlasSource_d3755")
sources/0 = SubResource("TileSetAtlasSource_g2wek")
sources/1 = SubResource("TileSetAtlasSource_0ga6k")

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_js4rq"]
blend_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7ypy4"]
size = Vector2(20, 10)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_rbymc"]

[sub_resource type="SpriteFrames" id="SpriteFrames_fdqd8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("11_bg5ky")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_xoupx")
}],
"loop": true,
"name": &"on",
"speed": 5.0
}]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_xubt8"]
blend_mode = 1

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_144yw"]
blend_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uq4qt"]
size = Vector2(20, 10)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_4oc1d"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_0kwvr"]
blend_mode = 1

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kw5wp"]
texture = ExtResource("12_ukfxe")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:0/0 = 0
4:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:0/0/physics_layer_0/angular_velocity = 0.0
5:0/0 = 0
5:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:0/0/physics_layer_0/angular_velocity = 0.0
6:0/0 = 0
6:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:0/0/physics_layer_0/angular_velocity = 0.0
7:0/0 = 0
7:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:0/0/physics_layer_0/angular_velocity = 0.0
0:1/0 = 0
0:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:1/0/physics_layer_0/angular_velocity = 0.0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:1/0 = 0
4:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:1/0/physics_layer_0/angular_velocity = 0.0
5:1/0 = 0
5:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:1/0/physics_layer_0/angular_velocity = 0.0
6:1/0 = 0
6:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:1/0/physics_layer_0/angular_velocity = 0.0
7:1/0 = 0
7:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:1/0/physics_layer_0/angular_velocity = 0.0
0:2/0 = 0
0:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:2/0/physics_layer_0/angular_velocity = 0.0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:2/0 = 0
4:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
4:2/0/physics_layer_0/angular_velocity = 0.0
5:2/0 = 0
5:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
5:2/0/physics_layer_0/angular_velocity = 0.0
6:2/0 = 0
6:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:2/0/physics_layer_0/angular_velocity = 0.0
7:2/0 = 0
7:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:2/0/physics_layer_0/angular_velocity = 0.0
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_w6eyk"]
resource_name = "<null>"
texture = ExtResource("5_2wgmv")
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0 = 0
3:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:1/0/physics_layer_0/angular_velocity = 0.0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:2/0 = 0
3:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:2/0/physics_layer_0/angular_velocity = 0.0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:2/0 = 0
6:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:2/0/physics_layer_0/angular_velocity = 0.0
6:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:1/0 = 0
6:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:1/0/physics_layer_0/angular_velocity = 0.0
6:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:0/0 = 0
6:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
6:0/0/physics_layer_0/angular_velocity = 0.0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:0/0 = 0
7:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:0/0/physics_layer_0/angular_velocity = 0.0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:1/0 = 0
7:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:1/0/physics_layer_0/angular_velocity = 0.0
7:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:2/0 = 0
7:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
7:2/0/physics_layer_0/angular_velocity = 0.0
7:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSet" id="TileSet_jt3fn"]
physics_layer_0/collision_layer = 2
physics_layer_0/collision_mask = 2
sources/3 = SubResource("TileSetAtlasSource_w6eyk")
sources/0 = SubResource("TileSetAtlasSource_kw5wp")

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_wcuqd"]
blend_mode = 1

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_gma5t"]
blend_mode = 1

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_bkrtl"]
blend_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q1de7"]
size = Vector2(1, 4)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1q3sd"]
size = Vector2(6, 6)

[sub_resource type="GDScript" id="GDScript_lj3cf"]
script/source = "extends Node2D

@export var next_level = \"level1\"

@export var red_player: Node
@export var green_player: Node
@export var blue_player: Node

@export var music: Node

var red = false
var green = false
var blue = false

	
	
func check():
	
	if(red and blue and green):
		Globals.musicProgress  = music.get_playback_position() 
		var next_scene = load(\"res://level5.tscn\").instantiate()
		get_tree().root.add_child(next_scene)
		get_tree().set_current_scene(next_scene)
		get_node(\"/root/lvl4\").free()
		

func _on_area_2d_body_entered(body):
	if(body == red_player):
		red = true
		check()
		
	elif(body == green_player):
		green = true
		check()
		
	elif(body == blue_player):
		blue = true
		check()


func _on_area_2d_body_exited(body):
	if(body == red_player):
		red = false
		
	elif(body == green_player):
		green = false
		
	elif(body == blue_player):
		blue = false
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_j1h6h"]
size = Vector2(15, 48)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_wmuuf"]
blend_mode = 1

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mra7r"]
size = Vector2(16, 15.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lpnd4"]
size = Vector2(421, 21)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dlxlj"]
size = Vector2(44.5, 6.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_psff5"]
size = Vector2(281.5, 21)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3ackb"]
size = Vector2(73.75, 103.5)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_ipq33"]
blend_mode = 2

[node name="lvl4" type="Node2D"]
script = ExtResource("1_sax3v")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0wu17")

[node name="crt" type="ColorRect" parent="." node_paths=PackedStringArray("camera") groups=["crt"]]
top_level = true
material = ExtResource("2_vhg5k")
offset_right = 561.0
offset_bottom = 315.0
scale = Vector2(1.01466, 1.02358)
script = ExtResource("3_ii714")
camera = NodePath("../Camera2D")

[node name="Chromatic_manager" type="Node2D" parent="." node_paths=PackedStringArray("red", "green", "blue", "red_player", "green_player", "blue_player", "red_crate", "green_crate", "blue_crate", "music")]
script = SubResource("GDScript_yhb2v")
red = NodePath("../blue")
green = NodePath("../red")
blue = NodePath("../green")
red_player = NodePath("../blue_player")
green_player = NodePath("../red_player")
blue_player = NodePath("../green_player")
red_crate = NodePath("../crate/blue_crate")
green_crate = NodePath("../crate/red_crate")
blue_crate = NodePath("../crate/green_crate")
music = NodePath("../Music")

[node name="Audio" type="AudioStreamPlayer" parent="Chromatic_manager"]

[node name="Level_manager" type="Node2D" parent="." node_paths=PackedStringArray("switch1", "disabled_tiles", "rswitch2", "gswitch2", "bswitch2", "door")]
script = SubResource("GDScript_hxjmm")
switch1 = NodePath("../Safe/switch1")
disabled_tiles = NodePath("../disabled")
rswitch2 = NodePath("../red/Red Switch2")
gswitch2 = NodePath("../green/Green Switch")
bswitch2 = NodePath("../blue/Blue Switch1")
door = NodePath("../door2")

[node name="Audio" type="AudioStreamPlayer" parent="Level_manager"]

[node name="Safe" type="TileMap" parent="."]
tile_set = SubResource("TileSet_muorx")
format = 2
layer_0/tile_data = PackedInt32Array(0, 196609, 1, 65536, 196609, 1, 131072, 196609, 1, 196608, 196609, 1, 262144, 196609, 1, 327680, 196609, 1, 393216, 196609, 1, 458752, 196609, 1, 524288, 196609, 1, 589824, 196609, 1, 655362, 196609, 0, 720898, 196609, 1, 786434, 196609, 1, 851971, 458753, 3, 458757, 458753, 4, 524293, 393217, 4, 589829, 393217, 4, 983047, 65537, 0, 1048583, 65537, 1, 983048, 196609, 0, 1048584, 196609, 1, 917517, 65537, 0, 983053, 65537, 2, 917518, 131073, 0, 983054, 131073, 2, 917519, 196609, 0, 983055, 196609, 2, 524305, 65537, 0, 589841, 65537, 1, 524306, 131073, 0, 524307, 196609, 0, 589843, 196609, 1, 65556, 262145, 6, 131092, 393217, 4, 196628, 393217, 4, 23, 65537, 1, 65559, 65537, 1, 131095, 65537, 1, 589847, 393217, 4, 983064, 65537, 3, 1048600, 65537, 4, 983065, 196609, 3, 1048601, 196609, 4, 458781, 393217, 3, 852001, 131073, 2, 196642, 262145, 0, 262178, 65537, 1, 327714, 65537, 1, 393250, 65537, 1, 852002, 131073, 2, 917538, 262144, 0, 983074, 262144, 1, 1048610, 262144, 2, 655360, 327681, 1, 851968, 131073, 2, 1114112, 131073, 0, 655361, 131073, 0, 851969, 131073, 2, 1114113, 131073, 0, 851970, 327681, 2, 1114114, 131073, 0, 458755, 393217, 3, 1114115, 131073, 0, 458756, 458753, 3, 851972, 458753, 4, 1114116, 131073, 0, 655365, 327681, 2, 1114117, 131073, 0, 655366, 458753, 3, 1114118, 131073, 0, 655367, 458753, 3, 1114119, 262145, 1, 655368, 458753, 3, 1114120, 327681, 1, 262153, 458753, 3, 655369, 458753, 3, 1114121, 131073, 0, 262154, 458753, 3, 655370, 458753, 3, 1114122, 196609, 0, 262155, 458753, 3, 655371, 458753, 3, 262156, 458753, 3, 655372, 458753, 3, 262157, 458753, 3, 655373, 458753, 3, 262158, 458753, 4, 655374, 458753, 3, 655375, 458753, 3, 655376, 458753, 3, 262161, 262145, 6, 655377, 262145, 2, 655378, 131073, 2, 655379, 327681, 2, 262164, 262145, 7, 655380, 458753, 3, 655381, 458753, 3, 655382, 458753, 3, 196631, 65537, 1, 655383, 262145, 2, 196632, 131073, 2, 1114136, 65537, 0, 196633, 131073, 2, 1114137, 131073, 0, 196634, 131073, 2, 1114138, 131073, 0, 196635, 131073, 2, 1114139, 131073, 0, 196636, 131073, 2, 1114140, 131073, 0, 196637, 131073, 2, 851997, 65537, 2, 1114141, 131073, 0, 196638, 131073, 2, 458782, 458753, 3, 851998, 131073, 2, 1114142, 131073, 0, 196639, 131073, 2, 458783, 458753, 3, 851999, 131073, 2, 1114143, 131073, 0, 196640, 131073, 2, 458784, 458753, 3, 852000, 131073, 2, 1114144, 131073, 0, 196641, 131073, 2, 458785, 131073, 0, 1114145, 131073, 0, 458786, 262145, 1, 1114146, 131073, 0, 917504, 262144, 0, 983040, 262144, 1, 1048576, 262144, 2, 917534, 1, 6, 1048606, 131073, 6, 983070, 65537, 6, 458760, 65537, 3, 524296, 65537, 4, 589832, 65537, 5, 458761, 196609, 3, 524311, 65537, 5, 458775, 65537, 3, 458776, 131073, 3, 458777, 196609, 3, 524313, 196609, 5, 524312, 131073, 5, 262152, 393217, 3, 1179658, 327681, 1, 1179659, 131073, 0, 1179660, 131073, 0, 1179661, 131073, 0, 1179662, 131073, 0, 1179663, 131073, 0, 1179664, 131073, 0, 1179665, 131073, 0, 1179666, 131073, 0, 1179667, 131073, 0, 1179668, 131073, 0, 1179669, 131073, 0, 1179670, 131073, 0, 1179671, 131073, 0, 1179672, 393217, 2, 786461, 65537, 0, 786462, 131073, 0, 786463, 131073, 0, 786464, 262145, 1, 720928, 65537, 1, 655392, 65537, 1, 589856, 65537, 1, 524320, 65537, 1, -65513, 458753, 0, -131049, 458753, 0, -196585, 458753, 0, -262121, 458753, 0, -327657, 458753, 0, -393193, 458753, 0, -458729, 458753, 0, -65536, 458753, 0, -131072, 458753, 0, -196608, 458753, 0, -262144, 458753, 0, -327680, 458753, 0, -393216, 458753, 0, -458752, 458753, 0, 524297, 196609, 4, 589833, 196609, 5, 589842, 458753, 0, 720897, 458753, 0, 786433, 458753, 0, 786432, 458753, 0, 720896, 458753, 0, 524321, 458753, 0, 589857, 458753, 0, 655393, 458753, 0, 720929, 458753, 0, 786465, 458753, 0, 786466, 458753, 0, 720930, 458753, 0, 655394, 458753, 0, 589858, 458753, 0, 524322, 458753, 0)

[node name="switch1" type="StaticBody2D" parent="Safe"]
material = SubResource("CanvasItemMaterial_js4rq")
position = Vector2(504, 104)
collision_layer = 7
collision_mask = 7

[node name="switch" type="Area2D" parent="Safe/switch1"]
collision_layer = 7
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="Safe/switch1/switch"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_7ypy4")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Safe/switch1"]
material = SubResource("CanvasItemMaterial_rbymc")
sprite_frames = SubResource("SpriteFrames_fdqd8")

[node name="disabled" type="TileMap" parent="."]
position = Vector2(1008, 0)
tile_set = SubResource("TileSet_muorx")
format = 2
layer_0/tile_data = PackedInt32Array(524233, 65537, 0, 589769, 65537, 1, 589770, 196609, 1, 655306, 196609, 2, 524234, 196609, 0, 655305, 65537, 2, 983064, 65537, 0, 1048600, 65537, 1, 983065, 196609, 0, 1048601, 196609, 1, 458775, 65537, 0, 458776, 131073, 0, 458777, 196609, 0, 524311, 65537, 2, 524312, 131073, 2, 524313, 196609, 2)

[node name="door2" type="TileMap" parent="."]
tile_set = SubResource("TileSet_muorx")
format = 2
layer_0/tile_data = PackedInt32Array(1048606, 131073, 7, 917534, 1, 7, 983070, 65537, 7)

[node name="red" type="TileMap" parent="."]
modulate = Color(1, 0, 0, 1)
material = SubResource("CanvasItemMaterial_xubt8")
tile_set = ExtResource("10_1pc86")
format = 2
layer_0/tile_data = PackedInt32Array(917525, 0, 0, 983061, 0, 2, 917526, 65536, 0, 983062, 65536, 2, 917527, 131072, 0, 983063, 131072, 2, 917520, 65539, 0, 983056, 65539, 2, 917521, 196611, 0, 983057, 196611, 2, 458758, 65539, 0, 524294, 65539, 2, 458759, 196611, 0, 524295, 196611, 2, 458767, 0, 0, 524303, 0, 2, 458768, 131072, 0, 524304, 131072, 2, 262163, 393219, 0, 262162, 393219, 2, 458772, 393219, 2, 458773, 393219, 1, 458774, 393219, 0, 655386, 65539, 0, 655387, 131075, 0, 655388, 196611, 0, 720922, 65539, 2, 720923, 131075, 2, 720924, 196611, 2)

[node name="Red Switch2" type="StaticBody2D" parent="red"]
material = SubResource("CanvasItemMaterial_144yw")
position = Vector2(271, 216)

[node name="red_switch1" type="Area2D" parent="red/Red Switch2"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="red/Red Switch2/red_switch1"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_uq4qt")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="red/Red Switch2"]
material = SubResource("CanvasItemMaterial_4oc1d")
sprite_frames = ExtResource("10_r3sti")

[node name="green" type="TileMap" parent="."]
modulate = Color(0, 1, 0, 1)
material = SubResource("CanvasItemMaterial_0kwvr")
tile_set = SubResource("TileSet_jt3fn")
format = 2
layer_0/tile_data = PackedInt32Array(917525, 0, 0, 983061, 0, 2, 917526, 65536, 0, 983062, 65536, 2, 917527, 131072, 0, 983063, 131072, 2, 917520, 65539, 0, 983056, 65539, 2, 917521, 196611, 0, 983057, 196611, 2, 458758, 65539, 0, 524294, 65539, 2, 458759, 196611, 0, 524295, 196611, 2, 458767, 0, 0, 524303, 0, 2, 458768, 131072, 0, 524304, 131072, 2, 458774, 393219, 0, 262163, 393219, 0, 458773, 393219, 1, 458772, 393219, 2, 262162, 393219, 2, 655386, 65539, 0, 655387, 131075, 0, 655388, 196611, 0, 720922, 65539, 2, 720923, 131075, 2, 720924, 196611, 2)

[node name="Green Switch" type="StaticBody2D" parent="green"]
material = SubResource("CanvasItemMaterial_144yw")
position = Vector2(271, 216)
collision_layer = 2
collision_mask = 2

[node name="green_switch1" type="Area2D" parent="green/Green Switch"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="green/Green Switch/green_switch1"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_uq4qt")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="green/Green Switch"]
material = SubResource("CanvasItemMaterial_wcuqd")
sprite_frames = ExtResource("10_r3sti")

[node name="blue" type="TileMap" parent="."]
modulate = Color(0, 0, 1, 1)
material = SubResource("CanvasItemMaterial_gma5t")
tile_set = ExtResource("10_u137j")
format = 2
layer_0/tile_data = PackedInt32Array(917525, 1, 0, 983061, 1, 2, 917526, 65537, 0, 983062, 65537, 2, 917527, 131073, 0, 983063, 131073, 2, 458758, 65538, 0, 524294, 65538, 2, 458759, 196610, 0, 524295, 196610, 2, 458767, 1, 0, 524303, 1, 2, 458768, 131073, 0, 524304, 131073, 2, 983056, 65538, 2, 917521, 196610, 0, 983057, 196610, 2, 458774, 393218, 0, 262163, 393218, 0, 458773, 393218, 1, 458772, 393218, 2, 262162, 393218, 2, 655386, 65538, 0, 655387, 131074, 0, 655388, 196610, 0, 720922, 65538, 2, 720923, 131074, 2, 720924, 196610, 2, 917520, 65538, 0)

[node name="Blue Switch1" type="StaticBody2D" parent="blue"]
material = SubResource("CanvasItemMaterial_144yw")
position = Vector2(271, 216)
collision_layer = 4
collision_mask = 4

[node name="blue_switch1" type="Area2D" parent="blue/Blue Switch1"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="blue/Blue Switch1/blue_switch1"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_uq4qt")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="blue/Blue Switch1"]
material = SubResource("CanvasItemMaterial_bkrtl")
sprite_frames = ExtResource("10_r3sti")

[node name="red_player" parent="." groups=["Player"] instance=ExtResource("14_fp8mk")]
modulate = Color(1, 0, 0, 1)
position = Vector2(24, 264)

[node name="Push" type="Area2D" parent="red_player"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="red_player/Push"]
position = Vector2(6.5, -6)
shape = SubResource("RectangleShape2D_q1de7")
debug_color = Color(0.988235, 0, 0.294118, 0.419608)

[node name="Glitch" type="Area2D" parent="red_player"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="red_player/Glitch"]
shape = SubResource("RectangleShape2D_1q3sd")

[node name="green_player" parent="." groups=["Player"] instance=ExtResource("14_fp8mk")]
modulate = Color(0, 1, 0, 1)
position = Vector2(24, 264)
collision_layer = 2
collision_mask = 2

[node name="Push" type="Area2D" parent="green_player"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="green_player/Push"]
position = Vector2(6.5, -6)
shape = SubResource("RectangleShape2D_q1de7")
debug_color = Color(0.988235, 0, 0.294118, 0.419608)

[node name="Glitch" type="Area2D" parent="green_player"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D2" type="CollisionShape2D" parent="green_player/Glitch"]
shape = SubResource("RectangleShape2D_1q3sd")

[node name="blue_player" parent="." groups=["Player"] instance=ExtResource("14_fp8mk")]
modulate = Color(0, 0, 1, 1)
position = Vector2(24, 264)
collision_layer = 4
collision_mask = 4

[node name="Push" type="Area2D" parent="blue_player"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="blue_player/Push"]
position = Vector2(6.5, -6)
shape = SubResource("RectangleShape2D_q1de7")
debug_color = Color(0.988235, 0, 0.294118, 0.419608)

[node name="Glitch" type="Area2D" parent="blue_player"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D2" type="CollisionShape2D" parent="blue_player/Glitch"]
shape = SubResource("RectangleShape2D_1q3sd")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("crt")]
anchor_mode = 0
zoom = Vector2(1.02, 1.02)
script = ExtResource("15_hip5m")
decay = 2.0
crt = NodePath("../crt")

[node name="Exit" type="Node2D" parent="." node_paths=PackedStringArray("red_player", "green_player", "blue_player", "music")]
position = Vector2(541, 262)
script = SubResource("GDScript_lj3cf")
red_player = NodePath("../red_player")
green_player = NodePath("../green_player")
blue_player = NodePath("../blue_player")
music = NodePath("../Music")

[node name="Area2D" type="Area2D" parent="Exit"]
collision_layer = 7
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exit/Area2D"]
position = Vector2(4, -14)
shape = SubResource("RectangleShape2D_j1h6h")

[node name="crate" type="Node2D" parent="." groups=["Crate"]]
position = Vector2(112, -16)

[node name="red_crate" type="CharacterBody2D" parent="crate" groups=["Pushable"]]
modulate = Color(1, 0, 0, 1)
position = Vector2(-40, 120)
script = ExtResource("17_cj3di")

[node name="Sprite2D" type="Sprite2D" parent="crate/red_crate"]
material = SubResource("CanvasItemMaterial_wmuuf")
texture = ExtResource("18_u4w5w")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="crate/red_crate"]
position = Vector2(0, 0.25)
shape = SubResource("RectangleShape2D_mra7r")
debug_color = Color(0, 0.6, 0.701961, 0.419608)

[node name="blue_crate" type="CharacterBody2D" parent="crate" groups=["Pushable"]]
modulate = Color(0, 0, 1, 1)
position = Vector2(-40, 120)
collision_layer = 4
collision_mask = 4
script = ExtResource("17_cj3di")

[node name="Sprite2D" type="Sprite2D" parent="crate/blue_crate"]
material = SubResource("CanvasItemMaterial_wmuuf")
texture = ExtResource("18_u4w5w")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="crate/blue_crate"]
position = Vector2(0, 0.25)
shape = SubResource("RectangleShape2D_mra7r")

[node name="green_crate" type="CharacterBody2D" parent="crate" groups=["Pushable"]]
modulate = Color(0, 1, 0, 1)
position = Vector2(-40, 120)
collision_layer = 2
collision_mask = 2
script = ExtResource("17_cj3di")

[node name="Sprite2D" type="Sprite2D" parent="crate/green_crate"]
material = SubResource("CanvasItemMaterial_wmuuf")
texture = ExtResource("18_u4w5w")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="crate/green_crate"]
position = Vector2(0, 0.25)
shape = SubResource("RectangleShape2D_mra7r")

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("19_qftx2")
autoplay = true
bus = &"Music"

[node name="softlock" type="Node2D" parent="."]
visible = false
script = ExtResource("20_xtwef")

[node name="Sprite2D" type="Sprite2D" parent="softlock"]
position = Vector2(83, 48)
texture = ExtResource("21_q77o1")

[node name="Area2D" type="Area2D" parent="softlock"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="softlock/Area2D"]
position = Vector2(342.5, 276.5)
shape = SubResource("RectangleShape2D_lpnd4")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="softlock/Area2D"]
position = Vector2(493, 190)
shape = SubResource("RectangleShape2D_dlxlj")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="softlock/Area2D"]
position = Vector2(233.25, 158)
shape = SubResource("RectangleShape2D_psff5")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="softlock/Area2D"]
position = Vector2(46.125, 166.25)
shape = SubResource("RectangleShape2D_3ackb")

[node name="controls" type="ColorRect" parent="."]
visible = false
material = SubResource("CanvasItemMaterial_ipq33")
offset_right = 624.0
offset_bottom = 352.0
color = Color(0.803922, 0.803922, 0.803922, 1)
script = ExtResource("19_s4xhg")

[node name="Sprite2D" type="Sprite2D" parent="controls"]
position = Vector2(246, 276)
texture = ExtResource("20_edqrv")

[connection signal="body_entered" from="Safe/switch1/switch" to="Level_manager" method="_on_switch_body_entered"]
[connection signal="body_exited" from="Safe/switch1/switch" to="Level_manager" method="_on_switch_body_exited"]
[connection signal="body_entered" from="red/Red Switch2/red_switch1" to="Level_manager" method="_on_red_switch_1_body_entered"]
[connection signal="body_exited" from="red/Red Switch2/red_switch1" to="Level_manager" method="_on_red_switch_1_body_exited"]
[connection signal="body_entered" from="green/Green Switch/green_switch1" to="Level_manager" method="_on_green_switch_1_body_entered"]
[connection signal="body_exited" from="green/Green Switch/green_switch1" to="Level_manager" method="_on_green_switch_1_body_exited"]
[connection signal="body_entered" from="blue/Blue Switch1/blue_switch1" to="Level_manager" method="_on_blue_switch_1_body_entered"]
[connection signal="body_exited" from="blue/Blue Switch1/blue_switch1" to="Level_manager" method="_on_blue_switch_1_body_exited"]
[connection signal="body_entered" from="red_player/Push" to="red_player" method="_on_push_body_entered"]
[connection signal="body_exited" from="red_player/Push" to="red_player" method="_on_push_body_exited"]
[connection signal="body_entered" from="red_player/Glitch" to="red_player" method="_on_glitch_body_entered"]
[connection signal="body_entered" from="green_player/Push" to="green_player" method="_on_push_body_entered"]
[connection signal="body_exited" from="green_player/Push" to="green_player" method="_on_push_body_exited"]
[connection signal="body_entered" from="green_player/Glitch" to="green_player" method="_on_glitch_body_entered"]
[connection signal="body_entered" from="blue_player/Push" to="blue_player" method="_on_push_body_entered"]
[connection signal="body_exited" from="blue_player/Push" to="blue_player" method="_on_push_body_exited"]
[connection signal="body_entered" from="blue_player/Glitch" to="blue_player" method="_on_glitch_body_entered"]
[connection signal="body_entered" from="Exit/Area2D" to="Exit" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="Exit/Area2D" to="Exit" method="_on_area_2d_body_exited"]
[connection signal="body_entered" from="softlock/Area2D" to="softlock" method="_on_area_2d_body_entered"]
